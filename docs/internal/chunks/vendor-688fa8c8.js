function S(){}const $t=t=>t;function Me(t,e){for(const n in e)t[n]=e[n];return t}function Rt(t){return t()}function ut(){return Object.create(null)}function J(t){t.forEach(Rt)}function ge(t){return typeof t=="function"}function et(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Kt(t){return Object.keys(t).length===0}function en(t,...e){if(t==null)return S;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ir(t,e,n){t.$$.on_destroy.push(en(e,n))}function tn(t,e,n,r){if(t){const o=Mt(t,e,n,r);return t[0](o)}}function Mt(t,e,n,r){return t[1]&&r?Me(n.ctx.slice(),t[1](r(e))):n.ctx}function nn(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const s=[],a=Math.max(e.dirty.length,o.length);for(let c=0;c<a;c+=1)s[c]=e.dirty[c]|o[c];return s}return e.dirty|o}return e.dirty}function rn(t,e,n,r,o,s){if(o){const a=Mt(e,n,r,s);t.p(a,o)}}function on(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function ft(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function an(t){return t&&ge(t.destroy)?t.destroy:S}const It=typeof window!="undefined";let sn=It?()=>window.performance.now():()=>Date.now(),tt=It?t=>requestAnimationFrame(t):S;const oe=new Set;function Lt(t){oe.forEach(e=>{e.c(t)||(oe.delete(e),e.f())}),oe.size!==0&&tt(Lt)}function cn(t){let e;return oe.size===0&&tt(Lt),{promise:new Promise(n=>{oe.add(e={c:t,f:n})}),abort(){oe.delete(e)}}}let Fe=!1;function un(){Fe=!0}function fn(){Fe=!1}function ln(t,e,n,r){for(;t<e;){const o=t+(e-t>>1);n(o)<=r?t=o+1:e=o}return t}function dn(t){if(t.hydrate_init)return;t.hydrate_init=!0;let e=t.childNodes;if(t.nodeName==="HEAD"){const i=[];for(let u=0;u<e.length;u++){const f=e[u];f.claim_order!==void 0&&i.push(f)}e=i}const n=new Int32Array(e.length+1),r=new Int32Array(e.length);n[0]=-1;let o=0;for(let i=0;i<e.length;i++){const u=e[i].claim_order,f=(o>0&&e[n[o]].claim_order<=u?o+1:ln(1,o,d=>e[n[d]].claim_order,u))-1;r[i]=n[f]+1;const l=f+1;n[l]=i,o=Math.max(l,o)}const s=[],a=[];let c=e.length-1;for(let i=n[o]+1;i!=0;i=r[i-1]){for(s.push(e[i-1]);c>=i;c--)a.push(e[c]);c--}for(;c>=0;c--)a.push(e[c]);s.reverse(),a.sort((i,u)=>i.claim_order-u.claim_order);for(let i=0,u=0;i<a.length;i++){for(;u<s.length&&a[i].claim_order>=s[u].claim_order;)u++;const f=u<s.length?s[u]:null;t.insertBefore(a[i],f)}}function hn(t,e){t.appendChild(e)}function St(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function pn(t){const e=x("style");return vn(St(t),e),e.sheet}function vn(t,e){hn(t.head||t,e)}function D(t,e){if(Fe){for(dn(t),(t.actual_end_child===void 0||t.actual_end_child!==null&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild);t.actual_end_child!==null&&t.actual_end_child.claim_order===void 0;)t.actual_end_child=t.actual_end_child.nextSibling;e!==t.actual_end_child?(e.claim_order!==void 0||e.parentNode!==t)&&t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling}else(e.parentNode!==t||e.nextSibling!==null)&&t.appendChild(e)}function V(t,e,n){Fe&&!n?D(t,e):(e.parentNode!==t||e.nextSibling!=n)&&t.insertBefore(e,n||null)}function R(t){t.parentNode.removeChild(t)}function mn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function De(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ye(t){return document.createTextNode(t)}function nt(){return ye(" ")}function Lr(){return ye("")}function Ie(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function gn(t){return function(e){return e.preventDefault(),t.call(this,e)}}function N(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function lt(t,e){for(const n in e)N(t,n,e[n])}function B(t){return Array.from(t.childNodes)}function yn(t){t.claim_info===void 0&&(t.claim_info={last_index:0,total_claimed:0})}function Nt(t,e,n,r,o=!1){yn(t);const s=(()=>{for(let a=t.claim_info.last_index;a<t.length;a++){const c=t[a];if(e(c)){const i=n(c);return i===void 0?t.splice(a,1):t[a]=i,o||(t.claim_info.last_index=a),c}}for(let a=t.claim_info.last_index-1;a>=0;a--){const c=t[a];if(e(c)){const i=n(c);return i===void 0?t.splice(a,1):t[a]=i,o?i===void 0&&t.claim_info.last_index--:t.claim_info.last_index=a,c}}return r()})();return s.claim_order=t.claim_info.total_claimed,t.claim_info.total_claimed+=1,s}function Tt(t,e,n,r){return Nt(t,o=>o.nodeName===e,o=>{const s=[];for(let a=0;a<o.attributes.length;a++){const c=o.attributes[a];n[c.name]||s.push(c.name)}s.forEach(a=>o.removeAttribute(a))},()=>r(e))}function ae(t,e,n){return Tt(t,e,n,x)}function dt(t,e,n){return Tt(t,e,n,De)}function rt(t,e){return Nt(t,n=>n.nodeType===3,n=>{const r=""+e;if(n.data.startsWith(r)){if(n.data.length!==r.length)return n.splitText(r.length)}else n.data=r},()=>ye(e),!0)}function it(t){return rt(t," ")}function zt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ke(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function ie(t,e,n){t.classList[n?"add":"remove"](e)}function _n(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}function Sr(t,e=document.body){return Array.from(e.querySelectorAll(t))}const Le=new Map;let Se=0;function bn(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function wn(t,e){const n={stylesheet:pn(e),rules:{}};return Le.set(t,n),n}function ht(t,e,n,r,o,s,a,c=0){const i=16.666/r;let u=`{
`;for(let g=0;g<=1;g+=i){const y=e+(n-e)*s(g);u+=g*100+`%{${a(y,1-y)}}
`}const f=u+`100% {${a(n,1-n)}}
}`,l=`__svelte_${bn(f)}_${c}`,d=St(t),{stylesheet:m,rules:h}=Le.get(d)||wn(d,t);h[l]||(h[l]=!0,m.insertRule(`@keyframes ${l} ${f}`,m.cssRules.length));const _=t.style.animation||"";return t.style.animation=`${_?`${_}, `:""}${l} ${r}ms linear ${o}ms 1 both`,Se+=1,l}function kn(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),o=n.length-r.length;o&&(t.style.animation=r.join(", "),Se-=o,Se||Pn())}function Pn(){tt(()=>{Se||(Le.forEach(t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}}),Le.clear())})}let me;function ve(t){me=t}function qe(){if(!me)throw new Error("Function called outside component initialization");return me}function En(t){qe().$$.on_mount.push(t)}function Nr(t){qe().$$.after_update.push(t)}function Tr(t,e){qe().$$.context.set(t,e)}function zr(t){return qe().$$.context.get(t)}const pe=[],pt=[],Ee=[],vt=[],Ct=Promise.resolve();let Ge=!1;function Ft(){Ge||(Ge=!0,Ct.then(qt))}function Cr(){return Ft(),Ct}function se(t){Ee.push(t)}const We=new Set;let Pe=0;function qt(){const t=me;do{for(;Pe<pe.length;){const e=pe[Pe];Pe++,ve(e),On(e.$$)}for(ve(null),pe.length=0,Pe=0;pt.length;)pt.pop()();for(let e=0;e<Ee.length;e+=1){const n=Ee[e];We.has(n)||(We.add(n),n())}Ee.length=0}while(pe.length);for(;vt.length;)vt.pop()();Ge=!1,We.clear(),ve(t)}function On(t){if(t.fragment!==null){t.update(),J(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(se)}}let fe;function An(){return fe||(fe=Promise.resolve(),fe.then(()=>{fe=null})),fe}function xe(t,e,n){t.dispatchEvent(_n(`${e?"intro":"outro"}${n}`))}const Oe=new Set;let q;function Ze(){q={r:0,c:[],p:q}}function Je(){q.r||J(q.c),q=q.p}function I(t,e){t&&t.i&&(Oe.delete(t),t.i(e))}function j(t,e,n,r){if(t&&t.o){if(Oe.has(t))return;Oe.add(t),q.c.push(()=>{Oe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const Rn={duration:0};function mt(t,e,n,r){let o=e(t,n),s=r?0:1,a=null,c=null,i=null;function u(){i&&kn(t,i)}function f(d,m){const h=d.b-s;return m*=Math.abs(h),{a:s,b:d.b,d:h,duration:m,start:d.start,end:d.start+m,group:d.group}}function l(d){const{delay:m=0,duration:h=300,easing:_=$t,tick:g=S,css:y}=o||Rn,b={start:sn()+m,b:d};d||(b.group=q,q.r+=1),a||c?c=b:(y&&(u(),i=ht(t,s,d,h,m,_,y)),d&&g(0,1),a=f(b,h),se(()=>xe(t,d,"start")),cn(k=>{if(c&&k>c.start&&(a=f(c,h),c=null,xe(t,a.b,"start"),y&&(u(),i=ht(t,s,a.b,a.duration,0,_,o.css))),a){if(k>=a.end)g(s=a.b,1-s),xe(t,a.b,"end"),c||(a.b?u():--a.group.r||J(a.group.c)),a=null;else if(k>=a.start){const M=k-a.start;s=a.a+a.d*_(M/a.duration),g(s,1-s)}}return!!(a||c)}))}return{run(d){ge(o)?An().then(()=>{o=o(),l(d)}):l(d)},end(){u(),a=c=null}}}const Mn=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function In(t,e){const n={},r={},o={$$scope:1};let s=t.length;for(;s--;){const a=t[s],c=e[s];if(c){for(const i in a)i in c||(r[i]=1);for(const i in c)o[i]||(n[i]=c[i],o[i]=1);t[s]=c}else for(const i in a)o[i]=1}for(const a in r)a in n||(n[a]=void 0);return n}function Fr(t){return typeof t=="object"&&t!==null?t:{}}function Ln(t){t&&t.c()}function Sn(t,e){t&&t.l(e)}function Bt(t,e,n,r){const{fragment:o,on_mount:s,on_destroy:a,after_update:c}=t.$$;o&&o.m(e,n),r||se(()=>{const i=s.map(Rt).filter(ge);a?a.push(...i):J(i),t.$$.on_mount=[]}),c.forEach(se)}function Ht(t,e){const n=t.$$;n.fragment!==null&&(J(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Nn(t,e){t.$$.dirty[0]===-1&&(pe.push(t),Ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function jt(t,e,n,r,o,s,a,c=[-1]){const i=me;ve(t);const u=t.$$={fragment:null,ctx:null,props:s,update:S,not_equal:o,bound:ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:ut(),dirty:c,skip_bound:!1,root:e.target||i.$$.root};a&&a(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(l,d,...m)=>{const h=m.length?m[0]:d;return u.ctx&&o(u.ctx[l],u.ctx[l]=h)&&(!u.skip_bound&&u.bound[l]&&u.bound[l](h),f&&Nn(t,l)),d}):[],u.update(),f=!0,J(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){un();const l=B(e.target);u.fragment&&u.fragment.l(l),l.forEach(R)}else u.fragment&&u.fragment.c();e.intro&&I(t.$$.fragment),Bt(t,e.target,e.anchor,e.customElement),fn(),qt()}ve(i)}class Wt{$destroy(){Ht(this,1),this.$destroy=S}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!Kt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function qr(t){let e=t.baseURI;if(!e){const n=t.getElementsByTagName("base");e=n.length?n[0].href:t.URL}return e}const te=[];function Br(t,e=S){let n;const r=new Set;function o(c){if(et(t,c)&&(t=c,n)){const i=!te.length;for(const u of r)u[1](),te.push(u,t);if(i){for(let u=0;u<te.length;u+=2)te[u][0](te[u+1]);te.length=0}}}function s(c){o(c(t))}function a(c,i=S){const u=[c,i];return r.add(u),r.size===1&&(n=e(o)||S),c(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:o,update:s,subscribe:a}}let Ve;function Hr(t){Ve=t.router}const Tn=zn;function zn(t){Ve&&Ve.after_navigate(t)}function Cn(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function gt(t,{delay:e=0,duration:n=400,easing:r=Cn,amount:o=5,opacity:s=0}={}){const a=getComputedStyle(t),c=+a.opacity,i=a.filter==="none"?"":a.filter,u=c*(1-s);return{delay:e,duration:n,easing:r,css:(f,l)=>`opacity: ${c-u*l}; filter: ${i} blur(${l*o}px);`}}function Fn(t,e){const n=r=>{t&&!t.contains(r.target)&&!r.defaultPrevented&&(t.dispatchEvent(new CustomEvent("clickOutside")),e&&e())};return document.addEventListener("click",n),{destroy(){document.removeEventListener("click",n)}}}function qn(t){let e,n,r=[t[0],{viewBox:"0 0 20 20"},{fill:"currentColor"}],o={};for(let s=0;s<r.length;s+=1)o=Me(o,r[s]);return{c(){e=De("svg"),n=De("path"),this.h()},l(s){e=dt(s,"svg",{viewBox:!0,fill:!0});var a=B(e);n=dt(a,"path",{d:!0}),B(n).forEach(R),a.forEach(R),this.h()},h(){N(n,"d","M3 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 5a1 1 0 0 1 1-1h12a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1z"),lt(e,o)},m(s,a){V(s,e,a),D(e,n)},p(s,[a]){lt(e,o=In(r,[a&1&&s[0],{viewBox:"0 0 20 20"},{fill:"currentColor"}]))},i:S,o:S,d(s){s&&R(e)}}}function Bn(t,e,n){return t.$$set=r=>{n(0,e=Me(Me({},e),ft(r)))},e=ft(e),[e]}class Hn extends Wt{constructor(e){super();jt(this,e,Bn,qn,et,{})}}const{window:Ne}=Mn;function yt(t,e,n){const r=t.slice();return r[24]=e[n],r[26]=n,r}const jn=t=>({heading:t&64}),_t=t=>({heading:t[24],idx:t[26]});function bt(t){let e,n,r,o,s;return n=new Hn({props:{width:"1em"}}),{c(){e=x("button"),Ln(n.$$.fragment),this.h()},l(a){e=ae(a,"BUTTON",{"aria-label":!0,class:!0});var c=B(e);Sn(n.$$.fragment,c),c.forEach(R),this.h()},h(){N(e,"aria-label",t[4]),N(e,"class","svelte-9fj0ir")},m(a,c){V(a,e,c),Bt(n,e,null),r=!0,o||(s=Ie(e,"click",gn(t[22])),o=!0)},p(a,c){(!r||c&16)&&N(e,"aria-label",a[4])},i(a){r||(I(n.$$.fragment,a),r=!0)},o(a){j(n.$$.fragment,a),r=!1},d(a){a&&R(e),Ht(n),o=!1,s()}}}function wt(t){let e,n,r,o,s,a=t[3]&&kt(t),c=t[6],i=[];for(let f=0;f<c.length;f+=1)i[f]=Pt(yt(t,c,f));const u=f=>j(i[f],1,1,()=>{i[f]=null});return{c(){e=x("nav"),a&&a.c(),n=nt(),r=x("ul");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=ae(f,"NAV",{class:!0});var l=B(e);a&&a.l(l),n=it(l),r=ae(l,"UL",{class:!0});var d=B(r);for(let m=0;m<i.length;m+=1)i[m].l(d);d.forEach(R),l.forEach(R),this.h()},h(){N(r,"class","svelte-9fj0ir"),N(e,"class","svelte-9fj0ir")},m(f,l){V(f,e,l),a&&a.m(e,null),D(e,n),D(e,r);for(let d=0;d<i.length;d+=1)i[d].m(r,null);s=!0},p(f,l){if(f[3]?a?a.p(f,l):(a=kt(f),a.c(),a.m(e,n)):a&&(a.d(1),a=null),l&529605){c=f[6];let d;for(d=0;d<c.length;d+=1){const m=yt(f,c,d);i[d]?(i[d].p(m,l),I(i[d],1)):(i[d]=Pt(m),i[d].c(),I(i[d],1),i[d].m(r,null))}for(Ze(),d=c.length;d<i.length;d+=1)u(d);Je()}},i(f){if(!s){for(let l=0;l<c.length;l+=1)I(i[l]);f&&se(()=>{o||(o=mt(e,gt,{},!0)),o.run(1)}),s=!0}},o(f){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)j(i[l]);f&&(o||(o=mt(e,gt,{},!1)),o.run(0)),s=!1},d(f){f&&R(e),a&&a.d(),mn(i,f),f&&o&&o.end()}}}function kt(t){let e,n;return{c(){e=x("h2"),n=ye(t[3]),this.h()},l(r){e=ae(r,"H2",{class:!0});var o=B(e);n=rt(o,t[3]),o.forEach(R),this.h()},h(){N(e,"class","svelte-9fj0ir")},m(r,o){V(r,e,o),D(e,n)},p(r,o){o&8&&zt(n,r[3])},d(r){r&&R(e)}}}function Wn(t){let e=t[2](t[24])+"",n;return{c(){n=ye(e)},l(r){n=rt(r,e)},m(r,o){V(r,n,o)},p(r,o){o&68&&e!==(e=r[2](r[24])+"")&&zt(n,e)},d(r){r&&R(n)}}}function Pt(t){let e,n,r,o,s;const a=t[20].tocItem,c=tn(a,t,t[19],_t),i=c||Wn(t);return{c(){e=x("li"),i&&i.c(),n=nt(),this.h()},l(u){e=ae(u,"LI",{tabindex:!0,style:!0,class:!0});var f=B(e);i&&i.l(f),n=it(f),f.forEach(R),this.h()},h(){N(e,"tabindex",t[26]+1),ke(e,"margin-left",t[7][t[26]]-t[10]+"em"),ke(e,"font-size",2-.2*(t[7][t[26]]-t[10])+"ex"),N(e,"class","svelte-9fj0ir"),ie(e,"active",t[0]===t[24])},m(u,f){V(u,e,f),i&&i.m(e,null),D(e,n),r=!0,o||(s=Ie(e,"click",function(){ge(t[12](t[24]))&&t[12](t[24]).apply(this,arguments)}),o=!0)},p(u,f){t=u,c?c.p&&(!r||f&524352)&&rn(c,a,t,t[19],r?nn(a,t[19],f,jn):on(t[19]),_t):i&&i.p&&(!r||f&68)&&i.p(t,r?f:-1),(!r||f&1152)&&ke(e,"margin-left",t[7][t[26]]-t[10]+"em"),(!r||f&1152)&&ke(e,"font-size",2-.2*(t[7][t[26]]-t[10])+"ex"),f&65&&ie(e,"active",t[0]===t[24])},i(u){r||(I(i,u),r=!0)},o(u){j(i,u),r=!1},d(u){u&&R(e),i&&i.d(u),o=!1,s()}}}function xn(t){let e,n,r,o,s,a;se(t[21]);let c=!t[1]&&t[8]<t[5]&&bt(t),i=(t[1]||t[8]>t[5])&&wt(t);return{c(){e=x("aside"),c&&c.c(),n=nt(),i&&i.c(),this.h()},l(u){e=ae(u,"ASIDE",{class:!0});var f=B(e);c&&c.l(f),n=it(f),i&&i.l(f),f.forEach(R),this.h()},h(){N(e,"class","toc svelte-9fj0ir"),ie(e,"desktop",t[8]>t[5]),ie(e,"mobile",t[8]<t[5])},m(u,f){V(u,e,f),c&&c.m(e,null),D(e,n),i&&i.m(e,null),o=!0,s||(a=[Ie(Ne,"scroll",t[11]),Ie(Ne,"resize",t[21]),an(r=Fn.call(null,e,t[23]))],s=!0)},p(u,[f]){!u[1]&&u[8]<u[5]?c?(c.p(u,f),f&290&&I(c,1)):(c=bt(u),c.c(),I(c,1),c.m(e,n)):c&&(Ze(),j(c,1,1,()=>{c=null}),Je()),u[1]||u[8]>u[5]?i?(i.p(u,f),f&290&&I(i,1)):(i=wt(u),i.c(),I(i,1),i.m(e,null)):i&&(Ze(),j(i,1,1,()=>{i=null}),Je()),r&&ge(r.update)&&f&2&&r.update.call(null,u[23]),f&288&&ie(e,"desktop",u[8]>u[5]),f&288&&ie(e,"mobile",u[8]<u[5])},i(u){o||(I(c),I(i),o=!0)},o(u){j(c),j(i),o=!1},d(u){u&&R(e),c&&c.d(),i&&i.d(),s=!1,J(a)}}}function Qn(t,e,n){let r,o,{$$slots:s={},$$scope:a}=e,{headingSelector:c="main :where(h1, h2, h3, h4)"}=e,{getHeadingTitles:i=v=>v.innerText}=e,{getHeadingIds:u=v=>v.id}=e,{getHeadingLevels:f=v=>Number(v.nodeName[1])}=e,{activeHeading:l=null}=e,{open:d=!1}=e,{title:m="On this page"}=e,{openButtonLabel:h="Open table of contents"}=e,{breakpoint:_=1e3}=e,{flashClickedHeadingsFor:g=1500}=e,{keepActiveTocItemInView:y=!0}=e,{activeTopOffset:b=100}=e,k,M,E=[];Tn(()=>{n(6,E=[...document.querySelectorAll(c)]),T()}),En(()=>{n(6,E=[...document.querySelectorAll(c)]),T()});function T(){let v=E.length;for(;v--;){const{top:C}=E[v].getBoundingClientRect();if(C<b||v===0){if(n(0,l=E[v]),y){const A=document.querySelector("aside.toc > nav > ul > li.active");A==null||A.scrollIntoViewIfNeeded()}return}}}const ue=v=>()=>{n(1,d=!1);const C=Number(getComputedStyle(v).scrollMarginTop.replace("px",""));window.scrollTo({top:v.offsetTop-C,behavior:"smooth"});const A=u&&u(v);A&&history.replaceState({},"",`#${A}`),g&&(v.classList.add("toc-clicked"),setTimeout(()=>v.classList.remove("toc-clicked"),g))};function z(){n(8,k=Ne.innerWidth),n(9,M=Ne.innerHeight)}const L=()=>n(1,d=!d),Y=()=>n(1,d=!1);return t.$$set=v=>{"headingSelector"in v&&n(13,c=v.headingSelector),"getHeadingTitles"in v&&n(2,i=v.getHeadingTitles),"getHeadingIds"in v&&n(14,u=v.getHeadingIds),"getHeadingLevels"in v&&n(15,f=v.getHeadingLevels),"activeHeading"in v&&n(0,l=v.activeHeading),"open"in v&&n(1,d=v.open),"title"in v&&n(3,m=v.title),"openButtonLabel"in v&&n(4,h=v.openButtonLabel),"breakpoint"in v&&n(5,_=v.breakpoint),"flashClickedHeadingsFor"in v&&n(16,g=v.flashClickedHeadingsFor),"keepActiveTocItemInView"in v&&n(17,y=v.keepActiveTocItemInView),"activeTopOffset"in v&&n(18,b=v.activeTopOffset),"$$scope"in v&&n(19,a=v.$$scope)},t.$$.update=()=>{t.$$.dirty&32832&&n(7,r=E.map(f)),t.$$.dirty&128&&n(10,o=Math.min(...r))},[l,d,i,m,h,_,E,r,k,M,o,T,ue,c,u,f,g,y,b,a,s,z,L,Y]}class jr extends Wt{constructor(e){super();jt(this,e,Qn,xn,et,{headingSelector:13,getHeadingTitles:2,getHeadingIds:14,getHeadingLevels:15,activeHeading:0,open:1,title:3,openButtonLabel:4,breakpoint:5,flashClickedHeadingsFor:16,keepActiveTocItemInView:17,activeTopOffset:18})}}var ce=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},xt={},W={},O={},X={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseRotation=t.parseRotationName=t.Rotation=t.parsePiece=t.parsePieceName=t.isMinoPiece=t.Piece=void 0;var e;(function(i){i[i.Empty=0]="Empty",i[i.I=1]="I",i[i.L=2]="L",i[i.O=3]="O",i[i.Z=4]="Z",i[i.T=5]="T",i[i.J=6]="J",i[i.S=7]="S",i[i.Gray=8]="Gray"})(e=t.Piece||(t.Piece={}));function n(i){return i!==e.Empty&&i!==e.Gray}t.isMinoPiece=n;function r(i){switch(i){case e.I:return"I";case e.L:return"L";case e.O:return"O";case e.Z:return"Z";case e.T:return"T";case e.J:return"J";case e.S:return"S";case e.Gray:return"X";case e.Empty:return"_"}throw new Error("Unknown piece: ".concat(i))}t.parsePieceName=r;function o(i){switch(i.toUpperCase()){case"I":return e.I;case"L":return e.L;case"O":return e.O;case"Z":return e.Z;case"T":return e.T;case"J":return e.J;case"S":return e.S;case"X":case"GRAY":return e.Gray;case" ":case"_":case"EMPTY":return e.Empty}throw new Error("Unknown piece: ".concat(i))}t.parsePiece=o;var s;(function(i){i[i.Spawn=0]="Spawn",i[i.Right=1]="Right",i[i.Reverse=2]="Reverse",i[i.Left=3]="Left"})(s=t.Rotation||(t.Rotation={}));function a(i){switch(i){case s.Spawn:return"spawn";case s.Left:return"left";case s.Right:return"right";case s.Reverse:return"reverse"}throw new Error("Unknown rotation: ".concat(i))}t.parseRotationName=a;function c(i){switch(i.toLowerCase()){case"spawn":return s.Spawn;case"left":return s.Left;case"right":return s.Right;case"reverse":return s.Reverse}throw new Error("Unknown rotation: ".concat(i))}t.parseRotation=c})(X);Object.defineProperty(O,"__esModule",{value:!0});O.getPieces=O.getBlocks=O.getBlockXYs=O.getBlockPositions=O.PlayField=O.InnerField=O.createInnerField=O.createNewInnerField=void 0;var P=X,w={Width:10,Height:23,PlayBlocks:23*10};function Un(){return new ot({})}O.createNewInnerField=Un;function Dn(t){for(var e=new ot({}),n=-1;n<w.Height;n+=1)for(var r=0;r<w.Width;r+=1){var o=t.at(r,n);e.setNumberAt(r,n,(0,P.parsePiece)(o))}return e}O.createInnerField=Dn;var ot=function(){function t(e){var n=e.field,r=n===void 0?t.create(w.PlayBlocks):n,o=e.garbage,s=o===void 0?t.create(w.Width):o;this.field=r,this.garbage=s}return t.create=function(e){return new Qt({length:e})},t.prototype.fill=function(e){this.field.fill(e)},t.prototype.fillAll=function(e,n){this.field.fillAll(e,n)},t.prototype.canFill=function(e,n,r,o){var s=this,a=Ut(e,n,r,o);return a.every(function(c){var i=c[0],u=c[1];return 0<=i&&i<10&&0<=u&&u<w.Height&&s.getNumberAt(i,u)===P.Piece.Empty})},t.prototype.canFillAll=function(e){var n=this;return e.every(function(r){var o=r.x,s=r.y;return 0<=o&&o<10&&0<=s&&s<w.Height&&n.getNumberAt(o,s)===P.Piece.Empty})},t.prototype.isOnGround=function(e,n,r,o){return!this.canFill(e,n,r,o-1)},t.prototype.clearLine=function(){this.field.clearLine()},t.prototype.riseGarbage=function(){this.field.up(this.garbage),this.garbage.clearAll()},t.prototype.mirror=function(){this.field.mirror()},t.prototype.shiftToLeft=function(){this.field.shiftToLeft()},t.prototype.shiftToRight=function(){this.field.shiftToRight()},t.prototype.shiftToUp=function(){this.field.shiftToUp()},t.prototype.shiftToBottom=function(){this.field.shiftToBottom()},t.prototype.copy=function(){return new t({field:this.field.copy(),garbage:this.garbage.copy()})},t.prototype.equals=function(e){return this.field.equals(e.field)&&this.garbage.equals(e.garbage)},t.prototype.addNumber=function(e,n,r){0<=n?this.field.addOffset(e,n,r):this.garbage.addOffset(e,-(n+1),r)},t.prototype.setNumberFieldAt=function(e,n){this.field.setAt(e,n)},t.prototype.setNumberGarbageAt=function(e,n){this.garbage.setAt(e,n)},t.prototype.setNumberAt=function(e,n,r){return 0<=n?this.field.set(e,n,r):this.garbage.set(e,-(n+1),r)},t.prototype.getNumberAt=function(e,n){return 0<=n?this.field.get(e,n):this.garbage.get(e,-(n+1))},t.prototype.getNumberAtIndex=function(e,n){return n?this.getNumberAt(e%10,Math.floor(e/10)):this.getNumberAt(e%10,-(Math.floor(e/10)+1))},t.prototype.toFieldNumberArray=function(){return this.field.toArray()},t.prototype.toGarbageNumberArray=function(){return this.garbage.toArray()},t}();O.InnerField=ot;var Qt=function(){function t(e){var n=e.pieces,r=e.length,o=r===void 0?w.PlayBlocks:r;n!==void 0?this.pieces=n:this.pieces=Array.from({length:o}).map(function(){return P.Piece.Empty}),this.length=o}return t.load=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join("").trim();return t.loadInner(r)},t.loadMinify=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join("").trim();return t.loadInner(r,r.length)},t.loadInner=function(e,n){var r=n!==void 0?n:e.length;if(r%10!==0)throw new Error("Num of blocks in field should be mod 10");for(var o=n!==void 0?new t({length:n}):new t({}),s=0;s<r;s+=1){var a=e[s];o.set(s%10,Math.floor((r-s-1)/10),(0,P.parsePiece)(a))}return o},t.prototype.get=function(e,n){return this.pieces[e+n*w.Width]},t.prototype.addOffset=function(e,n,r){this.pieces[e+n*w.Width]+=r},t.prototype.set=function(e,n,r){this.setAt(e+n*w.Width,r)},t.prototype.setAt=function(e,n){this.pieces[e]=n},t.prototype.fill=function(e){for(var n=e.type,r=e.rotation,o=e.x,s=e.y,a=Be(n,r),c=0,i=a;c<i.length;c++){var u=i[c],f=[o+u[0],s+u[1]],l=f[0],d=f[1];this.set(l,d,n)}},t.prototype.fillAll=function(e,n){for(var r=0,o=e;r<o.length;r++){var s=o[r],a=s.x,c=s.y;this.set(a,c,n)}},t.prototype.clearLine=function(){for(var e=this.pieces.concat(),n=this.pieces.length/w.Width-1,r=n;0<=r;r-=1){var o=this.pieces.slice(r*w.Width,(r+1)*w.Width),s=o.every(function(i){return i!==P.Piece.Empty});if(s){var a=e.slice(0,r*w.Width),c=e.slice((r+1)*w.Width);e=a.concat(c,Array.from({length:w.Width}).map(function(){return P.Piece.Empty}))}}this.pieces=e},t.prototype.up=function(e){this.pieces=e.pieces.concat(this.pieces).slice(0,this.length)},t.prototype.mirror=function(){for(var e=[],n=0;n<this.pieces.length;n+=1){var r=this.pieces.slice(n*w.Width,(n+1)*w.Width);r.reverse();for(var o=0,s=r;o<s.length;o++){var a=s[o];e.push(a)}}this.pieces=e},t.prototype.shiftToLeft=function(){for(var e=this.pieces.length/10,n=0;n<e;n+=1){for(var r=0;r<w.Width-1;r+=1)this.pieces[r+n*w.Width]=this.pieces[r+1+n*w.Width];this.pieces[9+n*w.Width]=P.Piece.Empty}},t.prototype.shiftToRight=function(){for(var e=this.pieces.length/10,n=0;n<e;n+=1){for(var r=w.Width-1;1<=r;r-=1)this.pieces[r+n*w.Width]=this.pieces[r-1+n*w.Width];this.pieces[n*w.Width]=P.Piece.Empty}},t.prototype.shiftToUp=function(){var e=Array.from({length:10}).map(function(){return P.Piece.Empty});this.pieces=e.concat(this.pieces).slice(0,this.length)},t.prototype.shiftToBottom=function(){var e=Array.from({length:10}).map(function(){return P.Piece.Empty});this.pieces=this.pieces.slice(10,this.length).concat(e)},t.prototype.toArray=function(){return this.pieces.concat()},Object.defineProperty(t.prototype,"numOfBlocks",{get:function(){return this.pieces.length},enumerable:!1,configurable:!0}),t.prototype.copy=function(){return new t({pieces:this.pieces.concat(),length:this.length})},t.prototype.toShallowArray=function(){return this.pieces},t.prototype.clearAll=function(){this.pieces=this.pieces.map(function(){return P.Piece.Empty})},t.prototype.equals=function(e){if(this.pieces.length!==e.pieces.length)return!1;for(var n=0;n<this.pieces.length;n+=1)if(this.pieces[n]!==e.pieces[n])return!1;return!0},t}();O.PlayField=Qt;function Ut(t,e,n,r){return Be(t,e).map(function(o){return o[0]+=n,o[1]+=r,o})}O.getBlockPositions=Ut;function Gn(t,e,n,r){return Be(t,e).map(function(o){return{x:o[0]+n,y:o[1]+r}})}O.getBlockXYs=Gn;function Be(t,e){var n=Dt(t);switch(e){case P.Rotation.Spawn:return n;case P.Rotation.Left:return Jn(n);case P.Rotation.Reverse:return Vn(n);case P.Rotation.Right:return Zn(n)}throw new Error("Unsupported block")}O.getBlocks=Be;function Dt(t){switch(t){case P.Piece.I:return[[0,0],[-1,0],[1,0],[2,0]];case P.Piece.T:return[[0,0],[-1,0],[1,0],[0,1]];case P.Piece.O:return[[0,0],[1,0],[0,1],[1,1]];case P.Piece.L:return[[0,0],[-1,0],[1,0],[1,1]];case P.Piece.J:return[[0,0],[-1,0],[1,0],[-1,1]];case P.Piece.S:return[[0,0],[-1,0],[0,1],[1,1]];case P.Piece.Z:return[[0,0],[1,0],[0,1],[-1,1]]}throw new Error("Unsupported rotation")}O.getPieces=Dt;function Zn(t){return t.map(function(e){return[e[1],-e[0]]})}function Jn(t){return t.map(function(e){return[-e[1],e[0]]})}function Vn(t){return t.map(function(e){return[-e[0],-e[1]]})}var _e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.Buffer=void 0;var at="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xn=function(){function t(e){e===void 0&&(e=""),this.values=e.split("").map(Yn)}return t.prototype.poll=function(e){for(var n=0,r=0;r<e;r+=1){var o=this.values.shift();if(o===void 0)throw new Error("Unexpected fumen");n+=o*Math.pow(t.tableLength,r)}return n},t.prototype.push=function(e,n){n===void 0&&(n=1);for(var r=e,o=0;o<n;o+=1)this.values.push(r%t.tableLength),r=Math.floor(r/t.tableLength)},t.prototype.merge=function(e){for(var n=0,r=e.values;n<r.length;n++){var o=r[n];this.values.push(o)}},t.prototype.isEmpty=function(){return this.values.length===0},Object.defineProperty(t.prototype,"length",{get:function(){return this.values.length},enumerable:!1,configurable:!0}),t.prototype.get=function(e){return this.values[e]},t.prototype.set=function(e,n){this.values[e]=n},t.prototype.toString=function(){return this.values.map($n).join("")},t.tableLength=at.length,t}();_e.Buffer=Xn;function Yn(t){return at.indexOf(t)}function $n(t){return at[t]}var G={},Te=ce&&ce.__assign||function(){return Te=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Te.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0});G.createActionEncoder=G.createActionDecoder=void 0;var p=X;function le(t){return t!==0}var Kn=function(t,e,n){var r=e+n,o=r*t;function s(i){switch(i){case 0:return p.Piece.Empty;case 1:return p.Piece.I;case 2:return p.Piece.L;case 3:return p.Piece.O;case 4:return p.Piece.Z;case 5:return p.Piece.T;case 6:return p.Piece.J;case 7:return p.Piece.S;case 8:return p.Piece.Gray}throw new Error("Unexpected piece")}function a(i){switch(i){case 0:return p.Rotation.Reverse;case 1:return p.Rotation.Right;case 2:return p.Rotation.Spawn;case 3:return p.Rotation.Left}throw new Error("Unexpected rotation")}function c(i,u,f){var l=i%t,d=Math.floor(i/10),m=e-d-1;return u===p.Piece.O&&f===p.Rotation.Left?(l+=1,m-=1):u===p.Piece.O&&f===p.Rotation.Reverse?l+=1:u===p.Piece.O&&f===p.Rotation.Spawn?m-=1:u===p.Piece.I&&f===p.Rotation.Reverse?l+=1:u===p.Piece.I&&f===p.Rotation.Left||u===p.Piece.S&&f===p.Rotation.Spawn?m-=1:u===p.Piece.S&&f===p.Rotation.Right?l-=1:u===p.Piece.Z&&f===p.Rotation.Spawn?m-=1:u===p.Piece.Z&&f===p.Rotation.Left&&(l+=1),{x:l,y:m}}return{decode:function(i){var u=i,f=s(u%8);u=Math.floor(u/8);var l=a(u%4);u=Math.floor(u/4);var d=c(u%o,f,l);u=Math.floor(u/o);var m=le(u%2);u=Math.floor(u/2);var h=le(u%2);u=Math.floor(u/2);var _=le(u%2);u=Math.floor(u/2);var g=le(u%2);u=Math.floor(u/2);var y=!le(u%2);return{rise:m,mirror:h,colorize:_,comment:g,lock:y,piece:Te(Te({},d),{type:f,rotation:l})}}}};G.createActionDecoder=Kn;function de(t){return t?1:0}var er=function(t,e,n){var r=e+n,o=r*t;function s(c){var i=c.type,u=c.rotation,f=c.x,l=c.y;return(0,p.isMinoPiece)(i)?i===p.Piece.O&&u===p.Rotation.Left?(f-=1,l+=1):i===p.Piece.O&&u===p.Rotation.Reverse?f-=1:i===p.Piece.O&&u===p.Rotation.Spawn?l+=1:i===p.Piece.I&&u===p.Rotation.Reverse?f-=1:i===p.Piece.I&&u===p.Rotation.Left||i===p.Piece.S&&u===p.Rotation.Spawn?l+=1:i===p.Piece.S&&u===p.Rotation.Right?f+=1:i===p.Piece.Z&&u===p.Rotation.Spawn?l+=1:i===p.Piece.Z&&u===p.Rotation.Left&&(f-=1):(f=0,l=22),(e-l-1)*t+f}function a(c){var i=c.type,u=c.rotation;if(!(0,p.isMinoPiece)(i))return 0;switch(u){case p.Rotation.Reverse:return 0;case p.Rotation.Right:return 1;case p.Rotation.Spawn:return 2;case p.Rotation.Left:return 3}throw new Error("No reachable")}return{encode:function(c){var i=c.lock,u=c.comment,f=c.colorize,l=c.mirror,d=c.rise,m=c.piece,h=de(!i);return h*=2,h+=de(u),h*=2,h+=de(f),h*=2,h+=de(l),h*=2,h+=de(d),h*=o,h+=s(m),h*=4,h+=a(m),h*=8,h+=m.type,h}}};G.createActionEncoder=er;var be={};Object.defineProperty(be,"__esModule",{value:!0});be.createCommentParser=void 0;var Xe=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",Qe=Xe.length+1,tr=function(){return{decode:function(t){for(var e="",n=t,r=0;r<4;r+=1){var o=n%Qe;e+=Xe[o],n=Math.floor(n/Qe)}return e},encode:function(t,e){return Xe.indexOf(t)*Math.pow(Qe,e)}}};be.createCommentParser=tr;var we={};Object.defineProperty(we,"__esModule",{value:!0});we.Quiz=void 0;var Q=X,F;(function(t){t.Direct="direct",t.Swap="swap",t.Stock="stock"})(F||(F={}));var nr=function(){function t(e){this.quiz=t.verify(e)}return Object.defineProperty(t.prototype,"next",{get:function(){var e=this.quiz.indexOf(")")+1,n=this.quiz[e];return n===void 0||n===";"?"":n},enumerable:!1,configurable:!0}),t.isQuizComment=function(e){return e.startsWith("#Q=")},t.create=function(e,n){var r=function(o,s){var a=function(c){return c||""};return new t("#Q=[".concat(a(o),"](").concat(a(s[0]),")").concat(a(s.substring(1))))};return n!==void 0?r(e,n):r(void 0,e)},t.trim=function(e){return e.trim().replace(/\s+/g,"")},Object.defineProperty(t.prototype,"least",{get:function(){var e=this.quiz.indexOf(")");return this.quiz.substr(e+1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){var e=this.quiz.indexOf("(")+1,n=this.quiz[e];return n===")"?"":n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hold",{get:function(){var e=this.quiz.indexOf("[")+1,n=this.quiz[e];return n==="]"?"":n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leastAfterNext2",{get:function(){var e=this.quiz.indexOf(")");return this.quiz[e+1]===";"?this.quiz.substr(e+1):this.quiz.substr(e+2)},enumerable:!1,configurable:!0}),t.prototype.getOperation=function(e){var n=(0,Q.parsePieceName)(e),r=this.current;if(n===r)return F.Direct;var o=this.hold;if(n===o)return F.Swap;if(o===""){if(n===this.next)return F.Stock}else if(r===""&&n===this.next)return F.Direct;throw new Error("Unexpected hold piece in quiz: ".concat(this.quiz))},Object.defineProperty(t.prototype,"leastInActiveBag",{get:function(){var e=this.quiz.indexOf(";"),n=0<=e?this.quiz.substring(0,e):this.quiz,r=n.indexOf(")");return n[r+1]===";"?n.substr(r+1):n.substr(r+2)},enumerable:!1,configurable:!0}),t.verify=function(e){var n=this.trim(e);if(n.length===0||e==="#Q=[]()"||!e.startsWith("#Q="))return e;if(!n.match(/^#Q=\[[TIOSZJL]?]\([TIOSZJL]?\)[TIOSZJL]*;?.*$/i))throw new Error("Current piece doesn't exist, however next pieces exist: ".concat(e));return n},t.prototype.direct=function(){if(this.current===""){var e=this.leastAfterNext2;return new t("#Q=[".concat(this.hold,"](").concat(e[0],")").concat(e.substr(1)))}return new t("#Q=[".concat(this.hold,"](").concat(this.next,")").concat(this.leastAfterNext2))},t.prototype.swap=function(){if(this.hold==="")throw new Error("Cannot find hold piece: ".concat(this.quiz));var e=this.next;return new t("#Q=[".concat(this.current,"](").concat(e,")").concat(this.leastAfterNext2))},t.prototype.stock=function(){if(this.hold!==""||this.next==="")throw new Error("Cannot stock: ".concat(this.quiz));var e=this.leastAfterNext2,n=e[0]!==void 0?e[0]:"";return 1<e.length?new t("#Q=[".concat(this.current,"](").concat(n,")").concat(e.substr(1))):new t("#Q=[".concat(this.current,"](").concat(n,")"))},t.prototype.operate=function(e){switch(e){case F.Direct:return this.direct();case F.Swap:return this.swap();case F.Stock:return this.stock()}throw new Error("Unexpected operation")},t.prototype.format=function(){var e=this.nextIfEnd();if(e.quiz==="#Q=[]()")return new t("");var n=e.current,r=e.hold;if(n===""&&r!=="")return new t("#Q=[](".concat(r,")").concat(e.least));if(n===""){var o=e.least,s=o[0];return s===void 0?new t(""):s===";"?new t(o.substr(1)):new t("#Q=[](".concat(s,")").concat(o.substr(1)))}return e},t.prototype.getHoldPiece=function(){if(!this.canOperate())return Q.Piece.Empty;var e=this.hold;return e===void 0||e===""||e===";"?Q.Piece.Empty:(0,Q.parsePiece)(e)},t.prototype.getNextPieces=function(e){if(!this.canOperate())return e!==void 0?Array.from({length:e}).map(function(){return Q.Piece.Empty}):[];var n=(this.current+this.next+this.leastInActiveBag).substr(0,e);return e!==void 0&&n.length<e&&(n+=" ".repeat(e-n.length)),n.split("").map(function(r){return r===void 0||r===" "||r===";"?Q.Piece.Empty:(0,Q.parsePiece)(r)})},t.prototype.toString=function(){return this.quiz},t.prototype.canOperate=function(){var e=this.quiz;return e.startsWith("#Q=[]();")&&(e=this.quiz.substr(8)),e.startsWith("#Q=")&&e!=="#Q=[]()"},t.prototype.nextIfEnd=function(){return this.quiz.startsWith("#Q=[]();")?new t(this.quiz.substr(8)):this},t}();we.Quiz=nr;var Z={},ze=ce&&ce.__assign||function(){return ze=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},ze.apply(this,arguments)};Object.defineProperty(Z,"__esModule",{value:!0});Z.Mino=Z.Field=void 0;var Ae=O,U=X;function Ue(t){return t instanceof Ye?t.copy():Ye.from(t)}var rr=function(){function t(e){this.field=e}return t.create=function(e,n){return new t(new Ae.InnerField({field:e!==void 0?Ae.PlayField.load(e):void 0,garbage:n!==void 0?Ae.PlayField.loadMinify(n):void 0}))},t.prototype.canFill=function(e){if(e===void 0)return!0;var n=Ue(e);return this.field.canFillAll(n.positions())},t.prototype.canLock=function(e){return e===void 0?!0:this.canFill(e)?!this.canFill(ze(ze({},e),{y:e.y-1})):!1},t.prototype.fill=function(e,n){if(n===void 0&&(n=!1),e!==void 0){var r=Ue(e);if(!n&&!this.canFill(r))throw Error("Cannot fill piece on field");return this.field.fillAll(r.positions(),(0,U.parsePiece)(r.type)),r}},t.prototype.put=function(e){if(e!==void 0){for(var n=Ue(e);0<=n.y;n.y-=1)if(!!this.canLock(n))return this.fill(n),n;throw Error("Cannot put piece on field")}},t.prototype.clearLine=function(){this.field.clearLine()},t.prototype.at=function(e,n){return(0,U.parsePieceName)(this.field.getNumberAt(e,n))},t.prototype.set=function(e,n,r){this.field.setNumberAt(e,n,(0,U.parsePiece)(r))},t.prototype.copy=function(){return new t(this.field.copy())},t.prototype.str=function(e){e===void 0&&(e={});for(var n=e.reduced!==void 0?e.reduced:!0,r=e.separator!==void 0?e.separator:`
`,o=e.garbage===void 0||e.garbage?-1:0,s="",a=22;o<=a;a-=1){for(var c="",i=0;i<10;i+=1)c+=this.at(i,a);n&&c==="__________"||(n=!1,s+=c,a!==o&&(s+=r))}return s},t}();Z.Field=rr;var Ye=function(){function t(e,n,r,o){this.type=e,this.rotation=n,this.x=r,this.y=o}return t.from=function(e){return new t(e.type,e.rotation,e.x,e.y)},t.prototype.positions=function(){return(0,Ae.getBlockXYs)((0,U.parsePiece)(this.type),(0,U.parseRotation)(this.rotation),this.x,this.y).sort(function(e,n){return e.y===n.y?e.x-n.x:e.y-n.y})},t.prototype.operation=function(){return{type:this.type,rotation:this.rotation,x:this.x,y:this.y}},t.prototype.isValid=function(){try{(0,U.parsePiece)(this.type),(0,U.parseRotation)(this.rotation)}catch{return!1}return this.positions().every(function(e){var n=e.x,r=e.y;return 0<=n&&n<10&&0<=r&&r<23})},t.prototype.copy=function(){return new t(this.type,this.rotation,this.x,this.y)},t}();Z.Mino=Ye;Object.defineProperty(W,"__esModule",{value:!0});W.decode=W.extract=W.Page=void 0;var Gt=O,ir=_e,he=X,or=G,ar=be,Et=we,$e=Z,Zt=function(){function t(e,n,r,o,s,a){this.index=e,this.operation=r,this.comment=o,this.flags=s,this.refs=a,this._field=n.copy()}return Object.defineProperty(t.prototype,"field",{get:function(){return new $e.Field(this._field.copy())},set:function(e){this._field=(0,Gt.createInnerField)(e)},enumerable:!1,configurable:!0}),t.prototype.mino=function(){return $e.Mino.from(this.operation)},t}();W.Page=Zt;var ne={GarbageLine:1,Width:10};function Jt(t){var e=function(a,c){var i=c.trim().replace(/[?\s]+/g,"");return{version:a,data:i}},n=t,r=n.indexOf("&");0<=r&&(n=n.substring(0,r));{var o=t.match(/[vmd]115@/);if(o!=null&&o.index!==void 0){var s=n.substr(o.index+5);return e("115",s)}}{var o=t.match(/[vmd]110@/);if(o!=null&&o.index!==void 0){var s=n.substr(o.index+5);return e("110",s)}}throw new Error("Unsupported fumen version")}W.extract=Jt;function sr(t){var e=Jt(t),n=e.version,r=e.data;switch(n){case"115":return Ot(r,23);case"110":return Ot(r,21)}throw new Error("Unsupported fumen version")}W.decode=sr;function Ot(t,e){for(var n=e+ne.GarbageLine,r=n*ne.Width,o=new ir.Buffer(t),s=function(H){for(var K={changed:!1,field:H},ee=0;ee<r;){var je=o.poll(2),Vt=Math.floor(je/r),st=je%r;st!==r-1&&(K.changed=!0);for(var ct=0;ct<st+1;ct+=1){var Xt=ee%ne.Width,Yt=e-Math.floor(ee/ne.Width)-1;K.field.addNumber(Xt,Yt,Vt-8),ee+=1}}return K},a=0,c=(0,Gt.createNewInnerField)(),i={repeatCount:-1,refIndex:{comment:0,field:0},quiz:void 0,lastCommentText:""},u=[],f=(0,or.createActionDecoder)(ne.Width,e,ne.GarbageLine),l=(0,ar.createCommentParser)();!o.isEmpty();){var d=void 0;0<i.repeatCount?(d={field:c,changed:!1},i.repeatCount-=1):(d=s(c.copy()),d.changed||(i.repeatCount=o.poll(1)));var m=o.poll(3),h=f.decode(m),_=void 0;if(h.comment){for(var g=[],y=o.poll(2),b=0;b<Math.floor((y+3)/4);b+=1){var k=o.poll(5);g.push(k)}for(var M="",E=0,T=g;E<T.length;E++){var ue=T[E];M+=l.decode(ue)}var z=unescape(M.slice(0,y));i.lastCommentText=z,_={text:z},i.refIndex.comment=a;var L=_.text;if(Et.Quiz.isQuizComment(L))try{i.quiz=new Et.Quiz(L)}catch{i.quiz=void 0}else i.quiz=void 0}else a===0?_={text:""}:_={text:i.quiz!==void 0?i.quiz.format().toString():void 0,ref:i.refIndex.comment};var Y=!1;if(i.quiz!==void 0&&(Y=!0,i.quiz.canOperate()&&h.lock))if((0,he.isMinoPiece)(h.piece.type))try{var v=i.quiz.nextIfEnd(),C=v.getOperation(h.piece.type);i.quiz=v.operate(C)}catch{i.quiz=i.quiz.format()}else i.quiz=i.quiz.format();var A=void 0;h.piece.type!==he.Piece.Empty&&(A=h.piece);var $=void 0;d.changed||a===0?($={},i.refIndex.field=a):$={ref:i.refIndex.field},u.push(new Zt(a,d.field,A!==void 0?$e.Mino.from({type:(0,he.parsePieceName)(A.type),rotation:(0,he.parseRotationName)(A.rotation),x:A.x,y:A.y}):void 0,_.text!==void 0?_.text:i.lastCommentText,{quiz:Y,lock:h.lock,mirror:h.mirror,colorize:h.colorize,rise:h.rise},{field:$.ref,comment:_.ref})),a+=1,h.lock&&((0,he.isMinoPiece)(h.piece.type)&&d.field.fill(h.piece),d.field.clearLine(),h.rise&&d.field.riseGarbage(),h.mirror&&d.field.mirror()),c=d.field}return u}var He={},Ke=ce&&ce.__assign||function(){return Ke=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Ke.apply(this,arguments)};Object.defineProperty(He,"__esModule",{value:!0});He.encode=void 0;var At=O,Re=_e,re=X,cr=G,ur=be,fr=we,Ce={GarbageLine:1,Width:10};function lr(t){for(var e=function(_,g){var y=dr(_,g),b=y.changed,k=y.values;if(b)r.merge(k),n=-1;else if(n<0||r.get(n)===Re.Buffer.tableLength-1)r.merge(k),r.push(0),n=r.length-1;else if(r.get(n)<Re.Buffer.tableLength-1){var M=r.get(n);r.set(n,M+1)}},n=-1,r=new Re.Buffer,o=(0,At.createNewInnerField)(),s=(0,cr.createActionEncoder)(Ce.Width,23,Ce.GarbageLine),a=(0,ur.createCommentParser)(),c="",i=void 0,u=function(_){var g=t[_];g.flags=g.flags?g.flags:{};var y=g.field,b=y!==void 0?(0,At.createInnerField)(y):o.copy();e(o,b);var k=g.comment!==void 0&&(_!==0||g.comment!=="")?g.comment:void 0,M=g.operation!==void 0?{type:(0,re.parsePiece)(g.operation.type),rotation:(0,re.parseRotation)(g.operation.rotation),x:g.operation.x,y:g.operation.y}:{type:re.Piece.Empty,rotation:re.Rotation.Reverse,x:0,y:22},E;if(k!==void 0?k.startsWith("#Q=")?i!==void 0&&i.format().toString()===k?E=void 0:(E=k,c=E,i=new fr.Quiz(k)):i!==void 0&&i.format().toString()===k?(E=void 0,c=k,i=void 0):(E=c!==k?k:void 0,c=c!==k?E:c,i=void 0):(E=void 0,i=void 0),i!==void 0&&i.canOperate()&&g.flags.lock)if((0,re.isMinoPiece)(M.type))try{var T=i.nextIfEnd(),ue=T.getOperation(M.type);i=T.operate(ue)}catch{i=i.format()}else i=i.format();var z=Ke({lock:!0,colorize:_===0},g.flags),L={piece:M,rise:!!z.rise,mirror:!!z.mirror,colorize:!!z.colorize,lock:!!z.lock,comment:E!==void 0},Y=s.encode(L);if(r.push(Y,3),E!==void 0){var v=escape(g.comment),C=Math.min(v.length,4095);r.push(C,2);for(var A=0;A<C;A+=4){for(var $=0,H=0;H<4;H+=1){var K=A+H;if(C<=K)break;var ee=v.charAt(K);$+=a.encode(ee,H)}r.push($,5)}}else g.comment===void 0&&(c=void 0);L.lock&&((0,re.isMinoPiece)(L.piece.type)&&b.fill(L.piece),b.clearLine(),L.rise&&b.riseGarbage(),L.mirror&&b.mirror()),o=b},f=0;f<t.length;f+=1)u(f);var l=r.toString();if(l.length<41)return l;var d=[l.substr(0,42)],m=l.substring(42),h=m.match(/[\S]{1,47}/g)||[];return d.concat(h).join("?")}He.encode=lr;function dr(t,e){for(var n=23,r=n+1,o=r*Ce.Width,s=new Re.Buffer,a=function(h,_){var g=n-_-1;return e.getNumberAt(h,g)-t.getNumberAt(h,g)+8},c=function(h,_){var g=h*o+_;s.push(g,2)},i=!1,u=a(0,0),f=-1,l=0;l<r;l+=1)for(var d=0;d<Ce.Width;d+=1){var m=a(d,l);m!==u?(c(u,f),f=0,u=m,i=!0):f+=1}return c(u,f),{changed:i,values:s}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encoder=t.decoder=t.Mino=t.Field=void 0;var e=W,n=He,r=Z;Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return r.Field}}),Object.defineProperty(t,"Mino",{enumerable:!0,get:function(){return r.Mino}}),t.decoder={decode:function(o){return(0,e.decode)(o)}},t.encoder={encode:function(o){return"v115@".concat((0,n.encode)(o))}}})(xt);/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var hr=/["'&<>]/,pr=vr;function vr(t){var e=""+t,n=hr.exec(e);if(!n)return e;var r,o="",s=0,a=0;for(s=n.index;s<e.length;s++){switch(e.charCodeAt(s)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#39;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==s&&(o+=e.substring(a,s)),a=s+1,o+=r}return a!==s?o+e.substring(a,s):o}const{decoder:mr}=xt,gr=pr,yr={_:"#000",X:"#999",Xl:"#ccc",I:"hsl(180, 100%, 35%)",Il:"#0ff",L:"hsl(30, 95%, 47%)",Ll:"hsl(36, 100%, 55%)",O:"hsl(60, 70%, 40%)",Ol:"#ff0",Z:"hsl(0, 70%, 50%)",Zl:"hsl(0, 100%, 63%)",T:"hsl(295, 80%, 47%)",Tl:"hsl(300, 90%, 57%)",J:"hsl(240, 75%, 50%)",Jl:"hsl(240, 100%, 60%)",S:"hsl(120, 100%, 33%)",Sl:"#0f0"};function _r(t,e){const n=yr[t];return`<rect id="t${t}" fill="${n}" width="${e}" height="${e}"${t==="_"?' stroke="rgba(255,255,255,0.05)"':""}/>`}function br(t){const e=t.field.copy(),n=t.operation&&e.fill(t.operation),r=Array(200),o=new Set;for(let s=0;s<20;s++)for(let a=0;a<10;a++)r[s*10+a]={type:e.at(a,s),light:!1};if(n)for(const{x:s,y:a}of n.positions())o.add(a),r[a*10+s].light=!0;if(t.flags.lock){for(const s of o)if(wr(e,s))for(let a=0;a<10;a++)r[s*10+a].light=!0}return r}function wr(t,e){for(let n=0;n<10;n++)if(t.at(n,e)==="_")return!1;return!0}function kr({data:t,pages:e=mr.decode(t),index:n,delay:r=500,size:o=16,commentSize:s=16,animateType:a="css",comment:c="auto"}){n!=null&&(e=e.slice(n,n+1));const i=e.map(br),u=c==="always"?!0:c==="none"?!1:e.some(y=>y.comment),f=Math.round(s*1.6),l=s*1.2,d=o*20,m=o*10,h=o*20+(u?f:0);for(let y=i.length-1;y>=1;y--)for(let b=0;b<i[y].length;b++)Mr(i[y-1][b],i[y][b])&&(i[y][b]=null);for(let y=e.length-1;y>=1;y--)e[y].comment&&e[y].comment===e[y-1].comment&&(e[y].comment=null);const _=[],g=new Set;for(let y=0;y<i.length;y++){const b=Rr(i[y],o);for(const M of b.used)g.add(M);const k=u?Er({text:e[y].comment,width:m,height:f,y:d,size:s,offset:l,index:y}):"";_.push(`
      <svg viewBox="0 0 ${m} ${h}" id="f${y}">
        ${b.tiles.join("")}
        ${k}
        ${Or(y,i.length,r,a)}
      </svg>`)}return`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${m} ${h}" width="${m}" height="${h}" style="font-family: sans-serif">
      <defs>
        ${Ar(g,o)}
      </defs>
      ${_.join("")}
      ${Pr(d,i.length,m,r,a)}
    </svg>`.trim().replace(/>\s+</g,`>
<`)}function Pr(t,e,n,r,o){if(e===1)return"";const s=`d="M 0,${t} H${n}" stroke="silver" stroke-width="${n/50}" stroke-dasharray="${n}"`;if(o==="css")return`
      <path ${s} id="p"/>
      <style>
        #p {animation: p ${r*e}ms steps(${e}, start) infinite}
        @keyframes p {
          from {
            stroke-dashoffset: ${n};
          }
          to {
            stroke-dashoffset: 0;
          }
        }
      </style>`;return`
    <path ${s}>
      <animate attributeName="stroke-dashoffset" values="${a()}" calcMode="discrete" dur="${e*r}ms" repeatCount="indefinite"/>
    </path>`;function a(){const c=[];for(let i=0;i<e;i++)c.push((e-i-1)/e*n);return c.join(";")}}function Er({text:t,width:e,height:n,y:r,size:o,offset:s,index:a}){if(!t&&a)return"";const c=a===0?`<rect id="cbg" fill="#333" y="${r}" width="${e}" height="${n}"/>`:'<use href="#cbg"/>',i=t?`<text x="${e/2}" y="${r+s}" text-anchor="middle" font-size="${o}" fill="white">${gr(t)}</text>`:"";return c+i}function Or(t,e,n,r){return t===0?"":r==="css"?`<style>
      #f${t} {
        animation: a${t} ${e*n}ms step-end infinite;
      }
      @keyframes a${t} {
        0% {visibility: hidden} ${t*100/e}% {visibility: visible}
      }
    </style>`:`<animate attributeName="display" values="none;inline" calcMode="discrete" keyTimes="0;${t/e}" dur="${n*e}ms" repeatCount="indefinite" />`}function Ar(t,e){const n=[];for(const r of t)n.push(_r(r,e));return n.join("")}function Rr(t,e){const n=[],r=[],o=new Set;for(let s=0;s<t.length;s++){if(!t[s])continue;const a=`${t[s].type}${t[s].light?"l":""}`;o.add(a);const c=Math.floor(s/10),i=s%10,u=`<use href="#t${a}" x="${i*e}" y="${(20-c-1)*e}"/>`;a==="_"?n.push(u):r.push(u)}return{used:o,tiles:n.concat(r)}}function Mr(t,e){return t.type===e.type&&t.light===e.light}var Wr={createSVG:kr};export{Fr as A,Ht as B,Me as C,qr as D,Br as E,Cr as F,Hr as G,zr as H,mn as I,ie as J,D as K,Ir as L,S as M,Sr as N,tn as O,rn as P,on as Q,nn as R,Wt as S,jr as T,pt as U,Wr as V,B as a,N as b,ae as c,R as d,x as e,ke as f,V as g,rt as h,jt as i,zt as j,nt as k,Lr as l,it as m,Ze as n,j as o,Je as p,I as q,Tr as r,et as s,ye as t,Nr as u,En as v,Ln as w,Sn as x,Bt as y,In as z};
